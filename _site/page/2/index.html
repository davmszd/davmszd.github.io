<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

<head>

  <!-- Begin Jekyll SEO tag v2.2.3 -->
<title>Home | Davood Moosazadeh</title>
<meta property="og:title" content="Home" />
<meta name="author" content="Davood Moosazadeh" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Stories from a web developer." />
<meta property="og:description" content="Stories from a web developer." />
<link rel="canonical" href="http://localhost:4000/page/2/" />
<meta property="og:url" content="http://localhost:4000/page/2/" />
<meta property="og:site_name" content="Davood Moosazadeh" />
<link rel="prev" href="http://localhost:4000/">
<link rel="next" href="http://localhost:4000/page/3">
<script type="application/ld+json">
{"@context":"http://schema.org","@type":"WebPage","headline":"Home","author":{"@type":"Person","name":"Davood Moosazadeh"},"description":"Stories from a web developer.","url":"http://localhost:4000/page/2/"}</script>
<!-- End Jekyll SEO tag -->

  <link rel="canonical" href="http://sirwan.info/page/2/" />
  <title>
    Home &middot;  
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.png">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="/css/font-awesome.min.css">
</head>


<body class="theme-base-0c">

  <header class="masthead">
    <div class="masthead-inner">
      <div class="profilepic">
        <a href="http://localhost:4000"><img src="/public/avatar.png" alt="Profile Picture"></a>
      </div>
      <h2>Davood Moosazadeh</h2>
      <p class="lead">Stories from a web developer.</p>

      <div class="colophon">
        <ul class="colophon-links">
          <li>
            <a href="/about">about</a>
          </li>
          <li>
            <a href="/archive">archives</a>
          </li>
          <li>
            <a href="#">contact</a>
          </li>
        </ul>
        <p>&copy; 2017. Davood Moosazadeh All rights reserved.</p>
      </div>
    </div>
  </header>

  <div class="content container">
    <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/archive/2017/02/27/My-first-experiences-with-Linux/">
        My first experiences with Linux
      </a>
    </h1>

    <span class="post-date">27 Feb 2017</span>

    <p>Running Window 98 on my PC was my first experience with Windows. in fact, for the last 11 years or so, Windows has been the dominant operating system that I’ve been using. So, up until now, I have been an avid fan of Windows.</p>

<blockquote>
  <p>Disclaimer: I’m not going to say that I’m not interested in Windows anymore, I just want to explain my experience with Ubuntu</p>
</blockquote>

<p>Windows just works fine for the most part. But, as a developer, I have always felt something is missing. For solving this problem, Microsoft has tried its best bringing in tools like PowerShell and Bash to Windows. But again, with all these great features and tools, as a developer, you think something is missing.</p>

<p>Two weeks ago, I decided to give Linux a try, So I chose Ubuntu because it’s user-friendly and its community is huge. Actually, my goal was to do some experiments with new version of .NET called .NET Core. The experience was great. First, I created a very simple console application on Windows and deployed it as a <a href="https://docs.microsoft.com/en-us/dotnet/articles/core/preview3/deploying/#self-contained-deployments-scd">SCD (Self-Contained Deployment)</a>:</p>

<p><img width="800" src="/public/img/publish.jpg" /></p>

<p>Then, I copied the publish folder on my USB stick and finally, I could run my .NET Core application without installing the .NET runtime on the target machine:</p>

<p><img src="/public/img/run_app.png" /></p>

<p>As a .NET developer I have been waiting voraciously for such opportunity. So, I think it’s the best time to migrate to Linux.</p>

<p>Actually, I was amazed at the first impression because Linux has everything a developer needs out of the box. Python is already installed on the OS. This is great because there are times you want to write simple scripts, scrap a page or something like that.</p>

<p>Other cool features of Linux are commands like <a href="https://www.gnu.org/software/sed/manual/sed.html">sed</a> and <a href="https://www.gnu.org/software/grep/manual/html_node/index.html">grep</a>. These tools are great whether you are a developer or a network administrator. for example, suppose that you have following content within a file named <code class="highlighter-rouge">test.json</code>:</p>

<figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="p">{</span>
   <span class="s">"AppName"</span><span class="p">:</span> <span class="s">"Simple App"</span><span class="p">,</span>
   <span class="s">"Website"</span><span class="p">:</span> <span class="s">"sirwan.info"</span><span class="p">,</span>
   <span class="s">"UseSqlite"</span><span class="p">:</span> <span class="k">false</span><span class="p">,</span>
<span class="p">}</span></code></pre></figure>

<p>Now you want to replace all occurrence of <code class="highlighter-rouge">"UseSqlite": false,</code> to <code class="highlighter-rouge">"UseSqlite": true,</code> you can do that simply by typing this command:</p>

<figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="n">cat</span> <span class="n">text</span><span class="p">.</span><span class="n">json</span> <span class="p">|</span> <span class="n">sed</span> <span class="err">'</span><span class="n">s</span><span class="p">/</span><span class="s">"UseSqlite"</span><span class="p">:</span> <span class="k">false</span><span class="p">,/</span><span class="s">"UseSqlite"</span><span class="p">:</span> <span class="k">true</span><span class="p">,/</span><span class="err">'</span></code></pre></figure>

<p><img src="/public/img/sed_command.png" /></p>

<p>You can definitely do wide varaity of things using these tools, I just wanted to tell you how much I am excited about these cool stuff.</p>

<h3 id="development-on-ubuntu">Development on Ubuntu</h3>
<p>The good news is that .NET Core runs on Windows, Mac and Linux. In order to install .NET Core on Ubuntu you just simply need to navigate to <a href="https://www.microsoft.com/net/download">dot.net</a> site and download the appropriate version. after installing .NET Core, it gives you a CLI called <code class="highlighter-rouge">dotnet</code> so you can simply create, build and publish your applications using this command, for example:</p>

<figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="n">dotnet</span> <span class="k">new</span>
<span class="n">dotnet</span> <span class="n">restore</span>
<span class="n">dotnet</span> <span class="n">run</span></code></pre></figure>

<p>You can also use the editor of your choice for developing .NET Core application, personally I prefer to use <a href="http://code.visualstudio.com/">Visual Studio Code</a> or VSCode for short. because it has all great features you need:</p>

<p><img src="/public/img/vscode.png" width="800" /></p>

<p>VSCode is great, But I think using an IDE like Visual Studio gives you the power you need when are developing applications, Unfortunately, there’s no official version of Visual Studio for Linux at this time. I hope Microsoft release it for Linux users The only reason that I can’t abandon Windows is the lack of Visual Studio So I have to keep using Windows on my main machine.</p>

<h3 id="conclusion">Conclusion</h3>
<p>As I mentioned Visual Studio is the only reason to not completely abandon Windows, But I will use Ubuntu for sure. This was my first attempt to use Ubuntu and I am very happy about the experience, I would like to hear your ideas about your journey.</p>

<p>Happy Coding :))</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/archive/2016/11/23/Environments-in-ASP.NET-Core/">
        Environments in ASP.NET Core
      </a>
    </h1>

    <span class="post-date">23 Nov 2016</span>

    <p>In ASP.NET Core we can have different hosting environments, this is supported by an environment variable called <code class="highlighter-rouge">ASPNETCORE_ENVIRONMENT</code>. You can see this value is already set to <code class="highlighter-rouge">Development</code>:</p>

<p><img src="/public/img/environment.jpg" width="600" /></p>

<p>This value is active as long as you run your application inside Visual Studio, So when you deploy your application you must change this value. Actually, this value comes from a file called <code class="highlighter-rouge">launchSettings.json</code>:</p>

<figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="p">{</span>
  <span class="s">"iisSettings"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"windowsAuthentication"</span><span class="p">:</span> <span class="k">false</span><span class="p">,</span>
    <span class="s">"anonymousAuthentication"</span><span class="p">:</span> <span class="k">true</span><span class="p">,</span>
    <span class="s">"iisExpress"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"applicationUrl"</span><span class="p">:</span> <span class="s">"http://localhost:13880/"</span><span class="p">,</span>
      <span class="s">"sslPort"</span><span class="p">:</span> <span class="m">0</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"profiles"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"IIS Express"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"commandName"</span><span class="p">:</span> <span class="s">"IISExpress"</span><span class="p">,</span>
      <span class="s">"launchBrowser"</span><span class="p">:</span> <span class="k">true</span><span class="p">,</span>
      <span class="s">"environmentVariables"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"ASPNETCORE_ENVIRONMENT"</span><span class="p">:</span> <span class="s">"Development"</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="s">"ProjectName"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"commandName"</span><span class="p">:</span> <span class="s">"Project"</span><span class="p">,</span>
      <span class="s">"launchBrowser"</span><span class="p">:</span> <span class="k">true</span><span class="p">,</span>
      <span class="s">"launchUrl"</span><span class="p">:</span> <span class="s">"http://localhost:5000"</span><span class="p">,</span>
      <span class="s">"environmentVariables"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"ASPNETCORE_ENVIRONMENT"</span><span class="p">:</span> <span class="s">"Development"</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>You can determine what the environment is by using <code class="highlighter-rouge">IHostingEnvironment</code>:</p>

<figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="k">public</span> <span class="k">void</span> <span class="nf">Configure</span><span class="p">(</span><span class="n">IApplicationBuilder</span> <span class="n">app</span><span class="p">,</span> 
	<span class="n">IHostingEnvironment</span> <span class="n">env</span><span class="p">,</span> <span class="n">ILoggerFactory</span> <span class="n">loggerFactory</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">loggerFactory</span><span class="p">.</span><span class="nf">AddConsole</span><span class="p">();</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">env</span><span class="p">.</span><span class="nf">IsDevelopment</span><span class="p">())</span>
	<span class="p">{</span>
		<span class="n">app</span><span class="p">.</span><span class="nf">UseDeveloperExceptionPage</span><span class="p">();</span>
	<span class="p">}</span>
	<span class="k">else</span>
	<span class="p">{</span>
		<span class="n">app</span><span class="p">.</span><span class="nf">UseExceptionHandler</span><span class="p">(</span><span class="k">new</span> <span class="n">ExceptionHandlerOptions</span>
		<span class="p">{</span>
			<span class="n">ExceptionHandler</span> <span class="p">=</span> <span class="n">context</span> <span class="p">=&gt;</span> <span class="n">context</span><span class="p">.</span><span class="n">Response</span><span class="p">.</span><span class="nf">WriteAsync</span><span class="p">(</span><span class="s">"Opps!"</span><span class="p">)</span>
		<span class="p">});</span>
	<span class="p">}</span>

	<span class="c1">// other configurations
</span><span class="p">}</span></code></pre></figure>

<p>This object also has a method called <code class="highlighter-rouge">IsEnvironment</code> for using custom environment:</p>

<figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="k">if</span> <span class="p">(</span><span class="n">env</span><span class="p">.</span><span class="nf">IsEnvironment</span><span class="p">(</span><span class="s">"envName"</span><span class="p">))</span>
<span class="p">{</span>
    <span class="c1">// some config
</span><span class="p">}</span></code></pre></figure>

<p>One interesting thing is that the Startup class itself supports different environments, it means that for each environment you can have both <code class="highlighter-rouge">Configure</code> and <code class="highlighter-rouge">ConfigureServices</code>:</p>

<figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="k">public</span> <span class="k">void</span> <span class="nf">ConfigureDevelopment</span><span class="p">(</span><span class="n">IApplicationBuilder</span> <span class="n">app</span><span class="p">,</span> <span class="p">.....</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">ConfigureServicesDevelopment</span><span class="p">(</span><span class="n">IServiceCollection</span> <span class="n">services</span><span class="p">)</span>

<span class="k">public</span> <span class="k">void</span> <span class="nf">ConfigureStaging</span><span class="p">(</span><span class="n">IApplicationBuilder</span> <span class="n">app</span><span class="p">,</span> <span class="p">.....</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">ConfigureServicesStaging</span><span class="p">(</span><span class="n">IServiceCollection</span> <span class="n">services</span><span class="p">)</span>

<span class="k">public</span> <span class="k">void</span> <span class="nf">ConfigureProduction</span><span class="p">(</span><span class="n">IApplicationBuilder</span> <span class="n">app</span><span class="p">,</span> <span class="p">.....</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">ConfigureServicesProduction</span><span class="p">(</span><span class="n">IServiceCollection</span> <span class="n">services</span><span class="p">)</span></code></pre></figure>

<p>Now you might ask how we can set this environment variable, well there are several ways that you can use, this great <a href="http://andrewlock.net/how-to-set-the-hosting-environment-in-asp-net-core/">post</a> explains them in details.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/archive/2016/11/08/Getting-to-know-Singletone-Pattern/">
        Getting to know Singleton pattern in C#
      </a>
    </h1>

    <span class="post-date">08 Nov 2016</span>

    <p>This pattern helps us to ensure a class has only one instance. The term comes from the <a href="https://en.wikipedia.org/wiki/Singleton_(mathematics)">mathematical concept of a singleton</a>:</p>

<blockquote>
  <p>In mathematics, a singleton, also known as a unit set,[1] is a set with exactly one element. For example, the set {0} is a singleton.</p>
</blockquote>

<p>Eventually we must have a class that only gives us a single instance:</p>

<figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="kt">var</span> <span class="n">sigleInstance</span> <span class="p">=</span> <span class="n">MySingletonClass</span><span class="p">.</span><span class="nf">GetInstance</span><span class="p">();</span></code></pre></figure>

<p>As you can see the only way to access the instance is by calling a public static method called <code class="highlighter-rouge">GetInstance()</code>, the single object instance under consideration is created only for the first time it is requested. suppose the following class:</p>

<figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="k">public</span> <span class="k">class</span> <span class="nc">MySingletonClass</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="nf">MySingletonClass</span><span class="p">()</span>
    <span class="p">{</span>
	
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>Now I want to make this class singleton, So the first step is to ensure that no one can instantiate our class for doing so we must make the constrauctor <code class="highlighter-rouge">private</code>:</p>

<figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="k">public</span> <span class="k">class</span> <span class="nc">MySingletonClass</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="nf">MySingletonClass</span><span class="p">()</span>
    <span class="p">{</span>
	
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>Now whenever you want to create a new instance of <code class="highlighter-rouge">MySingletonClass</code> using <code class="highlighter-rouge">new</code> keyword, Visual Studio gives you this error:</p>

<p><img src="/public/img/singleton_error.jpg" width="500" /></p>

<p>But we can still instantiate it from within the class. So next step is to create a new variable of type <code class="highlighter-rouge">MySingletonClass</code> inside the class, this class is going to be the only instance of the class:</p>

<figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="k">public</span> <span class="k">class</span> <span class="nc">MySingletonClass</span>
<span class="p">{</span>
	<span class="k">private</span> <span class="k">static</span> <span class="n">MySingletonClass</span> <span class="n">_instance</span><span class="p">;</span>

	<span class="k">private</span> <span class="nf">MySingletonClass</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>So we are getting close to implementing the pattern. Now we need a way to get access the single instance. So we need a method like this:</p>

<figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="k">public</span> <span class="k">static</span> <span class="n">MySingletonClass</span> <span class="nf">GetInstance</span><span class="p">()</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">_instance</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">_instance</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">MySingletonClass</span><span class="p">();</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="n">_instance</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<p>This method instantiates <code class="highlighter-rouge">MySingletonClass</code> if an instance doesn’t already exist, otherwise it return the existing instance. To demonstrate the object lifetime we can print value of <code class="highlighter-rouge">GetHashCode()</code> fo these objects:</p>

<figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="kt">var</span> <span class="n">mySingleInstance</span>   <span class="p">=</span> <span class="n">MySingletonClass</span><span class="p">.</span><span class="nf">GetInstance</span><span class="p">();</span>
<span class="kt">var</span> <span class="n">mySingleInstance_2</span> <span class="p">=</span> <span class="n">MySingletonClass</span><span class="p">.</span><span class="nf">GetInstance</span><span class="p">();</span>
<span class="kt">var</span> <span class="n">mySingleInstance_3</span> <span class="p">=</span> <span class="n">MySingletonClass</span><span class="p">.</span><span class="nf">GetInstance</span><span class="p">();</span>
<span class="kt">var</span> <span class="n">mySingleInstance_4</span> <span class="p">=</span> <span class="n">MySingletonClass</span><span class="p">.</span><span class="nf">GetInstance</span><span class="p">();</span>

<span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="err">$</span><span class="s">"obj1: {mySingleInstance.GetHashCode()}"</span><span class="p">);</span>
<span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="err">$</span><span class="s">"obj2: {mySingleInstance_2.GetHashCode()} "</span><span class="p">);</span>
<span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="err">$</span><span class="s">"obj3: {mySingleInstance_3.GetHashCode()} "</span><span class="p">);</span>
<span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="err">$</span><span class="s">"obj4: {mySingleInstance_4.GetHashCode()} "</span><span class="p">);</span></code></pre></figure>

<p><img src="/public/img/singleton_GetHashCode.jpg" />
As you can see all of the objects are the same and share the same instance. The problem with this implementation is that, it’s not <a href="http://csharpindepth.com/Articles/General/Singleton.aspx">thread-safe</a>; it means that if seperate threads of execution access the <code class="highlighter-rouge">_instance</code> at the same time, more that one instance of the <code class="highlighter-rouge">MySingletonClass</code> object may be created. One of the solution is by using .NET 4’s <code class="highlighter-rouge">Lazy&lt;T&gt;</code> type:</p>

<figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="k">public</span> <span class="k">class</span> <span class="nc">MySingletonClass</span>
<span class="p">{</span>
	<span class="k">private</span> <span class="k">static</span> <span class="k">readonly</span> <span class="n">Lazy</span><span class="p">&lt;</span><span class="n">MySingletonClass</span><span class="p">&gt;</span> <span class="n">_instance</span> <span class="p">=</span> 
		<span class="k">new</span> <span class="n">Lazy</span><span class="p">&lt;</span><span class="n">MySingletonClass</span><span class="p">&gt;(()</span> <span class="p">=&gt;</span> <span class="k">new</span> <span class="nf">MySingletonClass</span><span class="p">());</span>

	<span class="k">private</span> <span class="nf">MySingletonClass</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>

	<span class="k">public</span> <span class="k">static</span> <span class="n">MySingletonClass</span> <span class="nf">GetInstance</span><span class="p">()</span>
	<span class="p">{</span>
		<span class="k">return</span> <span class="n">_instance</span><span class="p">.</span><span class="n">Value</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span> </code></pre></figure>


  </div>
  
</div>


<div class="pagination">
  
    <a href="/">&laquo; Prev</a>
  

  
    <a href="/page/3">Next &raquo;</a>
  
</div>

  </div>
  <footer id="footer" class="inner"><div class="container">
  <div class="row">
    <div class="col-md-12">
      <p>
        Copyright &copy; 2017 - Davood Moosazadeh | Site design based on the <a href="http://hyde.getpoole.com/">Hyde theme</a>
      </p>
    </div>
  </div>
</div></footer>
</body>

</html>